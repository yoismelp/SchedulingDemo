@model Scheduling_Demo.Models.AppointmentsViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="~/Scripts/CustomJS.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<h2 class="alert-info">Check In</h2>

<div>

    <hr />

    @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "formCheckIn" }))
    {

        if (Model.appointments.Count > 0)
        {
            <table class="table" style="align-content:center">

                <tr>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().Facility)
                    </th>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().MRNumber)
                    </th>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().GroupTopic)
                    </th>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().GroupDate)
                    </th>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().LOC)
                    </th>
                    <th>
                        @Html.LabelFor(m => Model.appointments.FirstOrDefault().CheckedIn)
                    </th>
                </tr>
                @for (int t = 0; t < Model.appointments.Count; t++)
                {
                    string bgc = Model.appointments[t].CheckedIn == true ? "#dfffcc" : "white";
                    <tr style="background-color:@bgc">
                        <td>
                            @Html.DisplayFor(x => Model.appointments[t].Facility)
                            @Html.HiddenFor(x => Model.appointments[t].Facility)
                        </td>
                        <td>
                            @Html.DisplayFor(x => Model.appointments[t].MRNumber)
                            @Html.HiddenFor(x => Model.appointments[t].MRNumber)
                        </td>
                        <td>
                            @Html.DisplayFor(x => Model.appointments[t].GroupTopic)
                            @Html.HiddenFor(x => Model.appointments[t].GroupTopic)
                        </td>
                        <td>
                            @Html.DisplayFor(x => Model.appointments[t].GroupDate)
                            @Html.HiddenFor(x => Model.appointments[t].GroupDate)
                        </td>
                        <td>
                            @Html.DisplayFor(x => Model.appointments[t].LOC)
                            @Html.HiddenFor(x => Model.appointments[t].LOC)
                        </td>
                        <td>
                            @Html.CheckBoxFor(x => Model.appointments[t].CheckedIn, htmlAttributes: new { @class = "checkbox1" })
                        </td>
                    </tr>
                }
            </table>


            <input type="submit" name="Submit" value="Submit" class="btn btn-info btn-lg" />
        }
        else
        {
            <h3 align="center" class="alert-danger">Nothing Found</h3>
        }
    }

    <br />

    <div>
        @Html.ActionLink("Back to Look Up Page", "ParameterPage")
    </div>
    <div class="Processing" style="display: none; width:20px; height: 20px">
        <img src="~/Content/Processing.gif" />
    </div>
</div>

@section scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryunobtrusive")
    <script src="~/Scripts/CustomJS.js"></script>
    <link href="~/Content/Site.css" rel="stylesheet" />
}
